{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useReducer, useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport reducerAuth from \"../reducers/reducerAuth\";\nimport setCurrentUser from \"../actions/Authentication\";\nimport AuthenticateGlobal from \"./AuthenticateGlobal\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Authenticate = function Authenticate(props) {\n  var _useReducer = useReducer(reducerAuth, {\n    isAuth: null,\n    user: {}\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      userState = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showChild = _useState2[0],\n      setShowChild = _useState2[1];\n\n  useEffect(function () {\n    setShowChild(true);\n\n    if (AsyncStorage.jwt) {\n      var token = AsyncStorage.jwt ? AsyncStorage.jwt : \"\";\n      var decoded = jwt_decode(token);\n\n      if (setShowChild) {\n        dispatch(setCurrentUser(decoded, token));\n      }\n    }\n\n    return function () {\n      setShowChild(false);\n    };\n  }, []);\n\n  if (!showChild) {\n    return null;\n  } else {\n    return _jsx(AuthenticateGlobal.Provider, {\n      value: {\n        userState: userState,\n        dispatch: dispatch\n      },\n      children: props.children\n    });\n  }\n};\n\nexport default Authenticate;","map":{"version":3,"names":["React","useState","useReducer","useEffect","jwt_decode","AsyncStorage","reducerAuth","setCurrentUser","AuthenticateGlobal","Authenticate","props","isAuth","user","userState","dispatch","showChild","setShowChild","jwt","token","decoded","children"],"sources":["C:/Users/User/Desktop/myProjectNative/online-ecom-frontend/ContextApi/store/Authentication.js"],"sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport reducerAuth from \"../reducers/reducerAuth\";\r\nimport setCurrentUser from \"../actions/Authentication\";\r\nimport AuthenticateGlobal from \"./AuthenticateGlobal\";\r\n\r\n// run authentication check\r\nconst Authenticate = (props) => {\r\n  const [userState, dispatch] = useReducer(reducerAuth, {\r\n    isAuth: null,\r\n    user: {},\r\n  });\r\n  // console.log(\"userState\", userState);\r\n  const [showChild, setShowChild] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setShowChild(true);\r\n    if (AsyncStorage.jwt) {\r\n      const token = AsyncStorage.jwt ? AsyncStorage.jwt : \"\";\r\n      const decoded = jwt_decode(token);\r\n      if (setShowChild) {\r\n        dispatch(setCurrentUser(decoded, token));\r\n      }\r\n    }\r\n    return () => {\r\n      setShowChild(false);\r\n    };\r\n  }, []);\r\n\r\n  if (!showChild) {\r\n    return null;\r\n  } else {\r\n    return (\r\n      <AuthenticateGlobal.Provider\r\n        value={{\r\n          userState,\r\n          dispatch,\r\n        }}\r\n      >\r\n        {props.children}\r\n      </AuthenticateGlobal.Provider>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Authenticate;\r\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AAEA,OAAOC,WAAP;AACA,OAAOC,cAAP;AACA,OAAOC,kBAAP;;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;EAC9B,kBAA8BR,UAAU,CAACI,WAAD,EAAc;IACpDK,MAAM,EAAE,IAD4C;IAEpDC,IAAI,EAAE;EAF8C,CAAd,CAAxC;EAAA;EAAA,IAAOC,SAAP;EAAA,IAAkBC,QAAlB;;EAKA,gBAAkCb,QAAQ,CAAC,KAAD,CAA1C;EAAA;EAAA,IAAOc,SAAP;EAAA,IAAkBC,YAAlB;;EAEAb,SAAS,CAAC,YAAM;IACda,YAAY,CAAC,IAAD,CAAZ;;IACA,IAAIX,YAAY,CAACY,GAAjB,EAAsB;MACpB,IAAMC,KAAK,GAAGb,YAAY,CAACY,GAAb,GAAmBZ,YAAY,CAACY,GAAhC,GAAsC,EAApD;MACA,IAAME,OAAO,GAAGf,UAAU,CAACc,KAAD,CAA1B;;MACA,IAAIF,YAAJ,EAAkB;QAChBF,QAAQ,CAACP,cAAc,CAACY,OAAD,EAAUD,KAAV,CAAf,CAAR;MACD;IACF;;IACD,OAAO,YAAM;MACXF,YAAY,CAAC,KAAD,CAAZ;IACD,CAFD;EAGD,CAZQ,EAYN,EAZM,CAAT;;EAcA,IAAI,CAACD,SAAL,EAAgB;IACd,OAAO,IAAP;EACD,CAFD,MAEO;IACL,OACE,KAAC,kBAAD,CAAoB,QAApB;MACE,KAAK,EAAE;QACLF,SAAS,EAATA,SADK;QAELC,QAAQ,EAARA;MAFK,CADT;MAAA,UAMGJ,KAAK,CAACU;IANT,EADF;EAUD;AACF,CApCD;;AAsCA,eAAeX,YAAf"},"metadata":{},"sourceType":"module"}